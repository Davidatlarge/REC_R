---
title: "README"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## TODO
- replace data reading via files with direct data vector supply to function  
- calculate the fluxes in the main fun, now they are calculated only when written to file by `write_fluxes()`, or make the output so that the fluxes can be calculated by another fun from the output.  
- calculate integrated fluxes in the main fun, now they are calculated only when written to file by `integrate_rates()`, or make the output so that the fluxes can be calculated by another fun from the output.  
- but a name should be definable somewhere   
- make the result a list of result objects rather than writing them to file directly  
- make graphic output optional (if slow)  
- check where matrix multiplication is needed  
- check which functions can be used from `matlab::` just to make sure  
- what does `[x_min, ind] = min(x_min_vec)` do in `find_local_minimum_with_smallest_x()`?  
- and `[mini,index] = min(-quot_crit)` in `calculate_con_rates_lin_sys_tichonov_mean_rate_2()`?  
- bring back the figure printing? 

#### notes on data input files
fun `read_input_data_func()` just read in the data one by one, extracted from the concentration file the concentration and depth vectors, interpolated data to fit the number of grid points supplied in the top function
for each parameter read from file it did the same interpolation (extension to the required grid number)
by using the user defined function `operate_property()`.
**THE FUN IS OBSOLETE IF THE INPUT DATA IS DIRECTLY SUPPLIED AND INTERPOLATED IN THE TOP FUN**  

input files:  
- z - depth  
- C - concentration  
- phi - porosity  
- omega - vertical advection velocity  
- D - effective molecular diffusion coefficient D  
- Db - bioturabtion coefficient DB  
- beta - irrigation coefficient   
output objects:  
- z_data  
- C_data  
- z_c  
- C_c  
- omega  
- D_total  
- beta  
- phi  
- error  

```{r eval=FALSE}
read_input_data_func <- function(
  path_to_input_files # redundant is working with df from environment  
  N_c # Number of computational grid points ALSO IN MAIN FUN
  # objects created by reading the files:
  z_data,
  C_data,
  z_c,
  C_c,
  omega,
  D_total,
  beta,
  phi,
  error
){
  
  # ------ read concentrations AND DEPTH FROM THE CONCENTRATOIN FILE----------------
  z_c = linspace(z_data[1], z_data[length(z_data)], N_c) # linspace() is the same in r and matlab
  
  C_c = interp1(z_data, C_data, xi = z_c, method = "linear") # interp1() is the same in r and matlab
  
  # ---------- porosity ---------------------
  
}
```

